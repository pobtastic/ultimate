<!DOCTYPE html>
<html>
<head>
<title>Lunar Jetman: Routine at F232</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="EE7A.html">EE7A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#f232">Map</a></td>
<td class="next">
Next: <a href="F295.html">F295</a>
</td>
</tr>
</table>
<div class="description">F232: New High Score Suffix</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="F4C6.html">HighScoreMessaging</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">NewHighScore_Suffix</td>
<td class="address-2"><span id="f232"></span>F232</td>
<td class="instruction">LD A,($5E77)</td>
<td class="comment-1" rowspan="3">If <a href="5E77.html">HighScorePosition</a> is zero, jump to <a href="F232.html#f26b">NewHighScore_Suffix_Top_Score</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f235"></span>F235</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f236"></span>F236</td>
<td class="instruction">JP Z,<a href="F232.html#f26b">NewHighScore_Suffix_Top_Score</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f239"></span>
<div class="comments">
<div class="paragraph">
00 is the "Top Score" so we +01 to make it human readable.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f239"></span>F239</td>
<td class="instruction">ADD A,$31</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">A</span>+31 (convert to ASCII + 01).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f23b"></span>F23B</td>
<td class="instruction">LD HL,$5007</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=5007 (screen buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f23e"></span>F23E</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash the ASCII highscore position on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f23f"></span>F23F</td>
<td class="instruction">CALL <a href="89EF.html">PrintScreen</a></td>
<td class="comment-1" rowspan="1">Call <a href="89EF.html">PrintScreen</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f242"></span>F242</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the ASCII highscore position from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f243"></span>F243</td>
<td class="instruction">SUB $31</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">A</span>-31.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f245"></span>F245</td>
<td class="instruction">LD HL,$8048</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=8048 (screen location).</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f248"></span>
<div class="comments">
<div class="paragraph">
Remember that 00 is the "Top Score" so 01 is 2nd place.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f248"></span>F248</td>
<td class="instruction">CP $01</td>
<td class="comment-1" rowspan="2">If the highscore position is 01 jump to <a href="F232.html#f261">NewHighScore_Suffix_ND</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f24a"></span>F24A</td>
<td class="instruction">JP Z,<a href="F232.html#f261">NewHighScore_Suffix_ND</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f24d"></span>
<div class="comments">
<div class="paragraph">
And 02 is 3rd...
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f24d"></span>F24D</td>
<td class="instruction">CP $02</td>
<td class="comment-1" rowspan="2">If the highscore position is 02 jump to <a href="F232.html#f266">NewHighScore_Suffix_RD</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f24f"></span>F24F</td>
<td class="instruction">JP Z,<a href="F232.html#f266">NewHighScore_Suffix_RD</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f252"></span>
<div class="comments">
<div class="paragraph">
Anything higher will use "TH".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">NewHighScore_Suffix_TH</td>
<td class="address-1"><span id="f252"></span>F252</td>
<td class="instruction">LD DE,$F274</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="F232.html#f274">HighScore_Suffixes_TH</a>.</td>
</tr>
<tr>
<td class="asm-label">NewHighScore_Suffix_Print</td>
<td class="address-2"><span id="f255"></span>F255</td>
<td class="instruction">CALL <a href="8A11.html">PrintStringColour</a></td>
<td class="comment-1" rowspan="1">Call <a href="8A11.html">PrintStringColour</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f258"></span>
<div class="comments">
<div class="paragraph">
Handle displaying "HIGHEST SCORE".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">NewHighScore_Suffix_Highest</td>
<td class="address-1"><span id="f258"></span>F258</td>
<td class="instruction">LD HL,$8060</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=8060 (screen location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f25b"></span>F25B</td>
<td class="instruction">LD DE,$F287</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="F232.html#f287">HighScore_Highest_Score</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f25e"></span>F25E</td>
<td class="instruction">JP <a href="8A11.html">PrintStringColour</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="8A11.html">PrintStringColour</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f261"></span>
<div class="comments">
<div class="paragraph">
Handle displaying the "ND" suffix.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">NewHighScore_Suffix_ND</td>
<td class="address-2"><span id="f261"></span>F261</td>
<td class="instruction">LD DE,$F281</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="F232.html#f281">HighScore_Suffixes_ND</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f264"></span>F264</td>
<td class="instruction">JR <a href="F232.html#f255">NewHighScore_Suffix_Print</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="F232.html#f255">NewHighScore_Suffix_Print</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f266"></span>
<div class="comments">
<div class="paragraph">
Handle displaying the "RD" suffix.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">NewHighScore_Suffix_RD</td>
<td class="address-2"><span id="f266"></span>F266</td>
<td class="instruction">LD DE,$F284</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="F232.html#f284">HighScore_Suffixes_RD</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f269"></span>F269</td>
<td class="instruction">JR <a href="F232.html#f255">NewHighScore_Suffix_Print</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="F232.html#f255">NewHighScore_Suffix_Print</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f26b"></span>
<div class="comments">
<div class="paragraph">
Handle displaying "TOP SCORE".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">NewHighScore_Suffix_Top_Score</td>
<td class="address-2"><span id="f26b"></span>F26B</td>
<td class="instruction">LD HL,$8058</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=8058 (screen location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f26e"></span>F26E</td>
<td class="instruction">LD DE,$F277</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="F232.html#f277">HighScore_Top_Score</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f271"></span>F271</td>
<td class="instruction">JP <a href="8A11.html">PrintStringColour</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="8A11.html">PrintStringColour</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f274"></span>
<div class="comments">
<div class="paragraph">
High Score Suffixes
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">HighScore_Suffixes_TH</td>
<td class="address-1"><span id="f274"></span>F274</td>
<td class="instruction">DEFM $46</td>
<td class="comment-1" rowspan="2">Attribute: 46 + "TH".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f275"></span>F275</td>
<td class="instruction">DEFM "T","H"+$80</td>
</tr>
<tr>
<td class="asm-label">HighScore_Top_Score</td>
<td class="address-1"><span id="f277"></span>F277</td>
<td class="instruction">DEFM $46</td>
<td class="comment-1" rowspan="2">Attribute: 46 + "TOP SCORE".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f278"></span>F278</td>
<td class="instruction">DEFM "TOP SCOR","E"+$80</td>
</tr>
<tr>
<td class="asm-label">HighScore_Suffixes_ND</td>
<td class="address-1"><span id="f281"></span>F281</td>
<td class="instruction">DEFM $46</td>
<td class="comment-1" rowspan="2">Attribute: 46 + "ND".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f282"></span>F282</td>
<td class="instruction">DEFM "N","D"+$80</td>
</tr>
<tr>
<td class="asm-label">HighScore_Suffixes_RD</td>
<td class="address-1"><span id="f284"></span>F284</td>
<td class="instruction">DEFM $46</td>
<td class="comment-1" rowspan="2">Attribute: 46 + "RD".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f285"></span>F285</td>
<td class="instruction">DEFM "R","D"+$80</td>
</tr>
<tr>
<td class="asm-label">HighScore_Highest_Score</td>
<td class="address-1"><span id="f287"></span>F287</td>
<td class="instruction">DEFM $46</td>
<td class="comment-1" rowspan="2">Attribute: 46 + "HIGHEST SCORE".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="f288"></span>F288</td>
<td class="instruction">DEFM "HIGHEST SCOR","E"+$80</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="EE7A.html">EE7A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#f232">Map</a></td>
<td class="next">
Next: <a href="F295.html">F295</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div><a href="../dec/asm/62002.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>