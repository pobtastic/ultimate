<!DOCTYPE html>
<html>
<head>
<title>Lunar Jetman: Routine at 95B6</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9531.html">9531</a>
</td>
<td class="up">Up: <a href="../maps/all.html#95b6">Map</a></td>
<td class="next">
Next: <a href="9654.html">9654</a>
</td>
</tr>
</table>
<div class="description">95B6: Routine at 95B6</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="B1A4.html">B1A4</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="95b6"></span>95B6</td>
<td class="instruction">CALL <a href="91BB.html">$91BB</a></td>
<td class="comment-1" rowspan="1">Call <a href="91BB.html">91BB</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="95b9"></span>95B9</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="95ba"></span>95BA</td>
<td class="instruction">LD DE,$7000</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="7000.html">TerrainData_Active</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="95bd"></span>95BD</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Switch the <span class="register">DE</span> and <span class="register">HL</span> registers.</td>
</tr>
<tr>
<td class="address-1"><span id="95be"></span>95BE</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<span class="register">HL</span>+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="95bf"></span>95BF</td>
<td class="instruction">BIT 3,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95c1"></span>95C1</td>
<td class="instruction">JR Z,<a href="95B6.html#95c7">$95C7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95c3"></span>95C3</td>
<td class="instruction">LD (HL),$0A</td>
<td class="comment-1" rowspan="1">Write 0A to <span class="register">HL</span>. <img alt="udg63166_67x4" src="../images/udgs/udg63166_67x4.png" /></td>
</tr>
<tr>
<td class="address-1"><span id="95c5"></span>95C5</td>
<td class="instruction">JR <a href="95B6.html#95c9">$95C9</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="95B6.html#95c9">95C9</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="95c7"></span>95C7</td>
<td class="instruction">LD (HL),$08</td>
<td class="comment-1" rowspan="1">Write 08 to <span class="register">HL</span>. <img alt="udg63150_67x4" src="../images/udgs/udg63150_67x4.png" /></td>
</tr>
<tr>
<td class="address-2"><span id="95c9"></span>95C9</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95ca"></span>95CA</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95cb"></span>95CB</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="address-1"><span id="95cd"></span>95CD</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95ce"></span>95CE</td>
<td class="instruction">LD HL,$7000</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="7000.html">TerrainData_Active</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="95d1"></span>95D1</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<span class="register">HL</span>+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="95d2"></span>95D2</td>
<td class="instruction">BIT 3,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95d4"></span>95D4</td>
<td class="instruction">JR Z,<a href="95B6.html#95da">$95DA</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95d6"></span>95D6</td>
<td class="instruction">LD (HL),$0A</td>
<td class="comment-1" rowspan="1">Write 0A to <span class="register">HL</span>. <img alt="udg63166_67x4" src="../images/udgs/udg63166_67x4.png" /></td>
</tr>
<tr>
<td class="address-1"><span id="95d8"></span>95D8</td>
<td class="instruction">JR <a href="95B6.html#95dc">$95DC</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="95B6.html#95dc">95DC</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="95da"></span>95DA</td>
<td class="instruction">LD (HL),$09</td>
<td class="comment-1" rowspan="1">Write 09 to <span class="register">HL</span>. <img alt="udg63158_67x4" src="../images/udgs/udg63158_67x4.png" /></td>
</tr>
<tr>
<td class="address-2"><span id="95dc"></span>95DC</td>
<td class="instruction">CALL <a href="970E.html#98ae">$98AE</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95df"></span>95DF</td>
<td class="instruction">JP NZ,<a href="95B6.html#9652">$9652</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95e2"></span>95E2</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95e3"></span>95E3</td>
<td class="instruction">SUB $08</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95e5"></span>95E5</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95e6"></span>95E6</td>
<td class="instruction">EX (SP),HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95e7"></span>95E7</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95e8"></span>95E8</td>
<td class="instruction">AND %00011111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-4.</td>
</tr>
<tr>
<td class="address-1"><span id="95ea"></span>95EA</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95eb"></span>95EB</td>
<td class="instruction">LD DE,$7000</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="7000.html">TerrainData_Active</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="95ee"></span>95EE</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95ef"></span>95EF</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95f0"></span>95F0</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95f1"></span>95F1</td>
<td class="instruction">EX (SP),HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95f2"></span>95F2</td>
<td class="instruction">LD A,($607A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95f5"></span>95F5</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95f7"></span>95F7</td>
<td class="instruction">JR NZ,<a href="95B6.html#95fa">$95FA</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95f9"></span>95F9</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="95fa"></span>95FA</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95fb"></span>95FB</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95fc"></span>95FC</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95fd"></span>95FD</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="95ff"></span>95FF</td>
<td class="instruction">LD DE,$F66E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9602"></span>9602</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9603"></span>9603</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9604"></span>9604</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9605"></span>9605</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9606"></span>9606</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9607"></span>9607</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9608"></span>9608</td>
<td class="instruction">LD A,($607A)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="960b"></span>960B</td>
<td class="instruction">NEG</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="960d"></span>960D</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="960f"></span>960F</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9610"></span>9610</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9611"></span>9611</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9612"></span>9612</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9613"></span>9613</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9615"></span>9615</td>
<td class="instruction">CALL <a href="95B6.html#9632">$9632</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9618"></span>9618</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9619"></span>9619</td>
<td class="instruction">EX (SP),HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="961a"></span>961A</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="961b"></span>961B</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="961c"></span>961C</td>
<td class="instruction">AND $03</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="961e"></span>961E</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="961f"></span>961F</td>
<td class="instruction">LD DE,$7000</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9622"></span>9622</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9623"></span>9623</td>
<td class="instruction">LD L,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9624"></span>9624</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9626"></span>9626</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9627"></span>9627</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9628"></span>9628</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9629"></span>9629</td>
<td class="instruction">LD DE,$F66E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="962c"></span>962C</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="962d"></span>962D</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="962e"></span>962E</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="962f"></span>962F</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9630"></span>9630</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=08 (counter).</td>
</tr>
<tr>
<td class="address-2"><span id="9632"></span>9632</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="9633"></span>9633</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9634"></span>9634</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9635"></span>9635</td>
<td class="instruction">LD L,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9637"></span>9637</td>
<td class="instruction">LD B,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9638"></span>9638</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9639"></span>9639</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="963a"></span>963A</td>
<td class="instruction">JR Z,<a href="95B6.html#9642">$9642</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="963c"></span>963C</td>
<td class="instruction">SRL H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="963e"></span>963E</td>
<td class="instruction">RR L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9640"></span>9640</td>
<td class="instruction">DJNZ <a href="95B6.html#963c">$963C</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9642"></span>9642</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9643"></span>9643</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9644"></span>9644</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9645"></span>9645</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9646"></span>9646</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9647"></span>9647</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9648"></span>9648</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9649"></span>9649</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="964a"></span>964A</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="964b"></span>964B</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="964c"></span>964C</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="964d"></span>964D</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="964e"></span>964E</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="964f"></span>964F</td>
<td class="instruction">DJNZ <a href="95B6.html#9632">$9632</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9651"></span>9651</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="address-2"><span id="9652"></span>9652</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="9653"></span>9653</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="9531.html">9531</a>
</td>
<td class="up">Up: <a href="../maps/all.html#95b6">Map</a></td>
<td class="next">
Next: <a href="9654.html">9654</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/ultimate/tree/main/sources/lunarjetman/">Source code</a>.</div>
<div><a href="../dec/asm/38326.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>