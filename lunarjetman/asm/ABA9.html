<!DOCTYPE html>
<html>
<head>
<title>Lunar Jetman: Routine at ABA9</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="AB9D.html">AB9D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#aba9">Map</a></td>
<td class="next">
Next: <a href="AC39.html">AC39</a>
</td>
</tr>
</table>
<div class="description">ABA9: Routine at ABA9</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="AC39.html">AC39</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="aba9"></span>ABA9</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">IX</span>+00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abac"></span>ABAC</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abad"></span>ABAD</td>
<td class="instruction">AND %00001111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abaf"></span>ABAF</td>
<td class="instruction">ADD A,$70</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abb1"></span>ABB1</td>
<td class="instruction">LD (IX+$00),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="abb4"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="A1AA.html">A1AA</a>, <a href="A325.html">A325</a>, <a href="A3FF.html">A3FF</a>, <a href="A73C.html">A73C</a>, <a href="AC39.html">AC39</a>, <a href="AD36.html">AD36</a>, <a href="B33D.html">B33D</a>, <a href="B37B.html">B37B</a>, <a href="B460.html">B460</a>, <a href="B785.html">B785</a> and <a href="B7BC.html">B7BC</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="abb4"></span>ABB4</td>
<td class="instruction">CALL <a href="8701.html">$8701</a></td>
<td class="comment-1" rowspan="1">Call <a href="8701.html">8701</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abb7"></span>ABB7</td>
<td class="instruction">JP <a href="8733.html">$8733</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="8733.html">8733</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abba"></span>ABBA</td>
<td class="instruction">LD E,$18</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=18.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abbc"></span>ABBC</td>
<td class="instruction">CALL <a href="AD36.html#b2a4">$B2A4</a></td>
<td class="comment-1" rowspan="1">Call <a href="AD36.html#b2a4">B2A4</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abbf"></span>ABBF</td>
<td class="instruction">CALL C,<a href="AD36.html#b2d7">$B2D7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abc2"></span>ABC2</td>
<td class="instruction">LD A,(IX+$17)</td>
<td class="comment-1" rowspan="3">If <span class="register">IX</span>+17 is zero, jump to <a href="AC39.html#ac3e">AC3E</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abc5"></span>ABC5</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abc6"></span>ABC6</td>
<td class="instruction">JR Z,<a href="AC39.html#ac3e">$AC3E</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abc8"></span>ABC8</td>
<td class="instruction">CALL <a href="ABA9.html#aba9">$ABA9</a></td>
<td class="comment-1" rowspan="1">Call <a href="ABA9.html">ABA9</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abcb"></span>ABCB</td>
<td class="instruction">LD A,($5E42)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="5E42.html">5E42</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abce"></span>ABCE</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="1">Flip the bits.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abcf"></span>ABCF</td>
<td class="instruction">AND %00001111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abd1"></span>ABD1</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abd2"></span>ABD2</td>
<td class="instruction">LD A,($5E67)</td>
<td class="comment-1" rowspan="3">If <a href="5E67.html">GameDelayTimer</a> is not zero, jump to <a href="ABA9.html#abe5">ABE5</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abd5"></span>ABD5</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abd6"></span>ABD6</td>
<td class="instruction">JR NZ,<a href="ABA9.html#abe5">$ABE5</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abd8"></span>ABD8</td>
<td class="instruction">LD A,($6078)</td>
<td class="comment-1" rowspan="3">If <a href="6060.html#6078">6078</a> is 81 jump toÂ <a href="ABA9.html#abe5">ABE5</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abdb"></span>ABDB</td>
<td class="instruction">CP $81</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abdd"></span>ABDD</td>
<td class="instruction">JR Z,<a href="ABA9.html#abe5">$ABE5</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abdf"></span>ABDF</td>
<td class="instruction">DEC (IX+$17)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abe2"></span>ABE2</td>
<td class="instruction">CALL Z,<a href="AD36.html#b16f">$B16F</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="abe5"></span>ABE5</td>
<td class="instruction">LD A,(IX+$17)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abe8"></span>ABE8</td>
<td class="instruction">LD HL,$2040</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=2040.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abeb"></span>ABEB</td>
<td class="instruction">CALL <a href="8C01.html">DrawGauge</a></td>
<td class="comment-1" rowspan="1">Call <a href="8C01.html">DrawGauge</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abee"></span>ABEE</td>
<td class="instruction">CALL <a href="AD36.html">$AD36</a></td>
<td class="comment-1" rowspan="1">Call <a href="AD36.html">AD36</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abf1"></span>ABF1</td>
<td class="instruction">JR NC,<a href="ABA9.html#ac29">$AC29</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abf3"></span>ABF3</td>
<td class="instruction">CALL <a href="AD0B.html">$AD0B</a></td>
<td class="comment-1" rowspan="1">Call <a href="AD0B.html">AD0B</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abf6"></span>ABF6</td>
<td class="instruction">LD HL,$587B</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=587B (attribute buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abf9"></span>ABF9</td>
<td class="instruction">CALL <a href="AD00.html">Handler_Colour2x2</a></td>
<td class="comment-1" rowspan="1">Call <a href="AD00.html">Handler_Colour2x2</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abfc"></span>ABFC</td>
<td class="instruction">LD HL,$587D</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=587D (attribute buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="abff"></span>ABFF</td>
<td class="instruction">LD A,$42</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=42 (attribute value).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="ac01"></span>AC01</td>
<td class="instruction">CALL <a href="AD00.html">Handler_Colour2x2</a></td>
<td class="comment-1" rowspan="1">Call <a href="AD00.html">Handler_Colour2x2</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac04"></span>AC04</td>
<td class="instruction">LD A,($5E42)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="5E42.html">5E42</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac07"></span>AC07</td>
<td class="instruction">AND %00111111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac09"></span>AC09</td>
<td class="instruction">CP $0F</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac0b"></span>AC0B</td>
<td class="instruction">JR Z,<a href="ABA9.html#ac1a">$AC1A</a></td>
<td class="comment-1" rowspan="1">If so, jump to <a href="ABA9.html#ac1a">AC1A</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac0d"></span>AC0D</td>
<td class="instruction">CP $2F</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac0f"></span>AC0F</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="ac10"></span>
<div class="comments">
<div class="paragraph">
Handle printing the "<img alt="alien" src="../images/font/alien.png" />" messaging.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac10"></span>AC10</td>
<td class="instruction">LD DE,$AC24</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="ABA9.html#ac24">BannerMessaging_Alien</a>.</td>
</tr>
<tr>
<td class="asm-label">BannerMessaging_Print</td>
<td class="address-2"><span id="ac13"></span>AC13</td>
<td class="instruction">LD HL,$10D8</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=10D8 (screen location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac16"></span>AC16</td>
<td class="instruction">CALL <a href="8A11.html">PrintStringColour</a></td>
<td class="comment-1" rowspan="1">Call <a href="8A11.html">PrintStringColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac19"></span>AC19</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="ac1a"></span>
<div class="comments">
<div class="paragraph">
Handle printing the "<img alt="base" src="../images/font/base.png" />" messaging.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="ac1a"></span>AC1A</td>
<td class="instruction">LD DE,$AC1F</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="ABA9.html#ac1f">BannerMessaging_Base</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac1d"></span>AC1D</td>
<td class="instruction">JR <a href="ABA9.html#ac13">BannerMessaging_Print</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="ABA9.html#ac13">BannerMessaging_Print</a>.</td>
</tr>
<tr>
<td class="asm-label">BannerMessaging_Base</td>
<td class="address-1"><span id="ac1f"></span>AC1F</td>
<td class="instruction">DEFM "Ecde","f"+$80</td>
<td class="comment-1" rowspan="1">Attribute: 45 + "<img alt="base" src="../images/font/base.png" />".</td>
</tr>
<tr>
<td class="asm-label">BannerMessaging_Alien</td>
<td class="address-1"><span id="ac24"></span>AC24</td>
<td class="instruction">DEFM "Eghi","j"+$80</td>
<td class="comment-1" rowspan="1">Attribute: 45 + "<img alt="alien" src="../images/font/alien.png" />".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="ac29"></span>AC29</td>
<td class="instruction">CALL <a href="AD0B.html">$AD0B</a></td>
<td class="comment-1" rowspan="1">Call <a href="AD0B.html">AD0B</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac2c"></span>AC2C</td>
<td class="instruction">LD HL,$587D</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=587D (attribute buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac2f"></span>AC2F</td>
<td class="instruction">CALL <a href="AD00.html">Handler_Colour2x2</a></td>
<td class="comment-1" rowspan="1">Call <a href="AD00.html">Handler_Colour2x2</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac32"></span>AC32</td>
<td class="instruction">LD HL,$587B</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=587B (attribute buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac35"></span>AC35</td>
<td class="instruction">LD A,$42</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=42 (attribute byte).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ac37"></span>AC37</td>
<td class="instruction">JR <a href="ABA9.html#ac01">$AC01</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="ABA9.html#ac01">AC01</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="AB9D.html">AB9D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#aba9">Map</a></td>
<td class="next">
Next: <a href="AC39.html">AC39</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div><a href="../dec/asm/43945.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>