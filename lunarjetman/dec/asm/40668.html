<!DOCTYPE html>
<html>
<head>
<title>Lunar Jetman: Routine at 40668</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="40650.html">40650</a>
</td>
<td class="up">Up: <a href="../maps/all.html#40668">Map</a></td>
<td class="next">
Next: <a href="40798.html">40798</a>
</td>
</tr>
</table>
<div class="description">40668: Routine at 9EDC</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="40668"></span>40668</td>
<td class="instruction">LD A,(24698)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="24672.html#24698">24698</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="40671"></span>40671</td>
<td class="instruction">SUB (IX+2)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40674"></span>40674</td>
<td class="instruction">NEG</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="40676"></span>
<div class="comments">
<div class="paragraph">
The Lunar Rover has seven (eleven?) frames of animation.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="40676"></span>40676</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="40678"></span>
<div class="comments">
<div class="paragraph">
With sprite IDs beginning from <a href="48784.html">34</a> ("Lunar Rover: Right Frame 1").
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="40678"></span>40678</td>
<td class="instruction">ADD A,34</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40680"></span>40680</td>
<td class="instruction">LD (IX+0),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to <span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="address-1"><span id="40683"></span>40683</td>
<td class="instruction">CALL <a href="34695.html">34695</a></td>
<td class="comment-1" rowspan="1">Call <a href="34695.html">34695</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="40686"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="40650.html">40650</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="40686"></span>40686</td>
<td class="instruction">LD A,(24172)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40689"></span>40689</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40690"></span>40690</td>
<td class="instruction">JR Z,<a href="40668.html#40698">40698</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40692"></span>40692</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40693"></span>40693</td>
<td class="instruction">LD (24172),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40696"></span>40696</td>
<td class="instruction">JR <a href="40668.html#40767">40767</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="40698"></span>40698</td>
<td class="instruction">LD L,(IX+1)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40701"></span>40701</td>
<td class="instruction">LD H,(IX+4)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40704"></span>40704</td>
<td class="instruction">CALL <a href="34054.html">AttributeAddress</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40707"></span>40707</td>
<td class="instruction">LD A,(24151)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40710"></span>40710</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40711"></span>40711</td>
<td class="instruction">JR Z,<a href="40668.html#40728">40728</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40713"></span>40713</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40714"></span>40714</td>
<td class="instruction">LD C,2</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40716"></span>40716</td>
<td class="instruction">LD D,71</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40718"></span>40718</td>
<td class="instruction">CALL <a href="35121.html">35121</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40721"></span>40721</td>
<td class="instruction">LD D,69</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40723"></span>40723</td>
<td class="instruction">LD C,2</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40725"></span>40725</td>
<td class="instruction">CALL <a href="35121.html">35121</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="40728"></span>40728</td>
<td class="instruction">CALL <a href="44342.html">44342</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40731"></span>40731</td>
<td class="instruction">JR NC,<a href="40668.html#40750">40750</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40733"></span>40733</td>
<td class="instruction">CALL <a href="44299.html">44299</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40736"></span>40736</td>
<td class="instruction">LD HL,22625</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40739"></span>40739</td>
<td class="instruction">CALL <a href="44288.html">Handler_Colour2x2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40742"></span>40742</td>
<td class="instruction">LD HL,22627</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40745"></span>40745</td>
<td class="instruction">LD A,66</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40747"></span>40747</td>
<td class="instruction">JP <a href="44288.html">Handler_Colour2x2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="40750"></span>40750</td>
<td class="instruction">CALL <a href="44299.html">44299</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40753"></span>40753</td>
<td class="instruction">LD HL,22627</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40756"></span>40756</td>
<td class="instruction">CALL <a href="44288.html">Handler_Colour2x2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40759"></span>40759</td>
<td class="instruction">LD HL,22625</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40762"></span>40762</td>
<td class="instruction">LD A,66</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40764"></span>40764</td>
<td class="instruction">JP <a href="44288.html">Handler_Colour2x2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="40767"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="37346.html">37346</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="40767"></span>40767</td>
<td class="instruction">CP 48</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40769"></span>40769</td>
<td class="instruction">JP NC,<a href="44342.html#45115">45115</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40772"></span>40772</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40773"></span>40773</td>
<td class="instruction">AND 7</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40775"></span>40775</td>
<td class="instruction">JR NZ,<a href="40668.html#40778">40778</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40777"></span>40777</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="40778"></span>40778</td>
<td class="instruction">OR 64</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40780"></span>40780</td>
<td class="instruction">LD (IX+7),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40783"></span>40783</td>
<td class="instruction">CALL <a href="34611.html">34611</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40786"></span>40786</td>
<td class="instruction">LD A,(IX+7)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40789"></span>40789</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40790"></span>40790</td>
<td class="instruction">AND 127</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40792"></span>40792</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40793"></span>40793</td>
<td class="instruction">LD D,32</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="40795"></span>40795</td>
<td class="instruction">JP <a href="47384.html">47384</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="40650.html">40650</a>
</td>
<td class="up">Up: <a href="../maps/all.html#40668">Map</a></td>
<td class="next">
Next: <a href="40798.html">40798</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.0.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/ultimate/tree/main/sources/lunarjetman/">Source code</a>.</div>
<div><a href="asm/40668.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>