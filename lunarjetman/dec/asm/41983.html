<!DOCTYPE html>
<html>
<head>
<title>Lunar Jetman: Routine at 41983</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="41921.html">41921</a>
</td>
<td class="up">Up: <a href="../maps/all.html#41983">Map</a></td>
<td class="next">
Next: <a href="42170.html">42170</a>
</td>
</tr>
</table>
<div class="description">41983: Routine at A3FF</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="41765.html">41765</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="41983"></span>41983</td>
<td class="instruction">LD A,(24720)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="24720.html">24720</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="41986"></span>41986</td>
<td class="instruction">SUB 26</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="41988"></span>41988</td>
<td class="instruction">CP 16</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="41990"></span>41990</td>
<td class="instruction">JR NC,<a href="41983.html#42074">42074</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="41992"></span>41992</td>
<td class="instruction">BIT 1,(IX+8)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="41996"></span>41996</td>
<td class="instruction">JR NZ,<a href="41983.html#42033">42033</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="41998"></span>41998</td>
<td class="instruction">CALL <a href="37980.html">37980</a></td>
<td class="comment-1" rowspan="1">Call <a href="37980.html">37980</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42001"></span>42001</td>
<td class="instruction">JR Z,<a href="41983.html#42033">42033</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42003"></span>42003</td>
<td class="instruction">CALL <a href="42215.html#42236">42236</a></td>
<td class="comment-1" rowspan="1">Call <a href="42215.html#42236">42236</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42006"></span>42006</td>
<td class="instruction">JR NC,<a href="41983.html#42033">42033</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42008"></span>42008</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Write 0 to <a href="24227.html">24227</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42009"></span>42009</td>
<td class="instruction">LD (24227),A</td>
</tr>
<tr>
<td class="address-1"><span id="42012"></span>42012</td>
<td class="instruction">LD A,(24704)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42015"></span>42015</td>
<td class="instruction">OR 1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42017"></span>42017</td>
<td class="instruction">LD (24704),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42020"></span>42020</td>
<td class="instruction">LD A,(IX+8)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42023"></span>42023</td>
<td class="instruction">AND %11110000</td>
<td class="comment-1" rowspan="1">Keep only bits 4-7.</td>
</tr>
<tr>
<td class="address-1"><span id="42025"></span>42025</td>
<td class="instruction">OR %00000011</td>
<td class="comment-1" rowspan="1">Set bits 0-1.</td>
</tr>
<tr>
<td class="address-1"><span id="42027"></span>42027</td>
<td class="instruction">LD (IX+8),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42030"></span>42030</td>
<td class="instruction">CALL <a href="47293.html">47293</a></td>
<td class="comment-1" rowspan="1">Call <a href="47293.html">47293</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42033"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="41208.html">41208</a> and <a href="46799.html">46799</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="42033"></span>42033</td>
<td class="instruction">LD A,(24720)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42036"></span>42036</td>
<td class="instruction">CP 34</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42038"></span>42038</td>
<td class="instruction">JR C,<a href="41983.html#42064">42064</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42040"></span>42040</td>
<td class="instruction">LD BC,65524</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42043"></span>42043</td>
<td class="instruction">LD HL,(24722)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42046"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="41208.html">41208</a> and <a href="46799.html">46799</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="42046"></span>42046</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42047"></span>42047</td>
<td class="instruction">LD (IX+2),L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42050"></span>42050</td>
<td class="instruction">LD (IX+3),H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42053"></span>42053</td>
<td class="instruction">LD A,(24724)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42056"></span>42056</td>
<td class="instruction">SUB 22</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42058"></span>42058</td>
<td class="instruction">LD (IX+4),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42061"></span>42061</td>
<td class="instruction">JP <a href="43945.html#43956">43956</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42064"></span>42064</td>
<td class="instruction">LD BC,18</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42067"></span>42067</td>
<td class="instruction">JR <a href="41983.html#42043">42043</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42069"></span>42069</td>
<td class="instruction">CALL <a href="41983.html#42125">42125</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42072"></span>42072</td>
<td class="instruction">JR <a href="41983.html#42095">42095</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42074"></span>42074</td>
<td class="instruction">CALL <a href="42361.html">42361</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42077"></span>42077</td>
<td class="instruction">LD A,(24130)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42080"></span>42080</td>
<td class="instruction">AND 1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42082"></span>42082</td>
<td class="instruction">JR NZ,<a href="41983.html#42095">42095</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42084"></span>42084</td>
<td class="instruction">CALL <a href="36752.html">HandlerControls</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42087"></span>42087</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42088"></span>42088</td>
<td class="instruction">BIT 3,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42090"></span>42090</td>
<td class="instruction">JR Z,<a href="41983.html#42069">42069</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42092"></span>42092</td>
<td class="instruction">CALL <a href="41983.html#42144">42144</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42095"></span>42095</td>
<td class="instruction">LD A,(24696)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42098"></span>42098</td>
<td class="instruction">CP 22</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42100"></span>42100</td>
<td class="instruction">JR C,<a href="41983.html#42115">42115</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42102"></span>42102</td>
<td class="instruction">LD A,8</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42104"></span>42104</td>
<td class="instruction">CALL <a href="41983.html#42154">42154</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42107"></span>42107</td>
<td class="instruction">LD BC,65524</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42110"></span>42110</td>
<td class="instruction">LD HL,(24698)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42113"></span>42113</td>
<td class="instruction">JR <a href="41983.html#42046">42046</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42115"></span>42115</td>
<td class="instruction">LD A,0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42117"></span>42117</td>
<td class="instruction">CALL <a href="41983.html#42154">42154</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42120"></span>42120</td>
<td class="instruction">LD BC,18</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42123"></span>42123</td>
<td class="instruction">JR <a href="41983.html#42110">42110</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42125"></span>42125</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42128"></span>42128</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42129"></span>42129</td>
<td class="instruction">AND 7</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42131"></span>42131</td>
<td class="instruction">CP 7</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42133"></span>42133</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42134"></span>42134</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42135"></span>42135</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42136"></span>42136</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42137"></span>42137</td>
<td class="instruction">AND 248</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42139"></span>42139</td>
<td class="instruction">OR B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42140"></span>42140</td>
<td class="instruction">LD (IX+0),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42143"></span>42143</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42144"></span>42144</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42147"></span>42147</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42148"></span>42148</td>
<td class="instruction">AND 7</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42150"></span>42150</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42151"></span>42151</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42152"></span>42152</td>
<td class="instruction">JR <a href="41983.html#42135">42135</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="42154"></span>42154</td>
<td class="instruction">XOR (IX+8)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42157"></span>42157</td>
<td class="instruction">AND 8</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42159"></span>42159</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42160"></span>42160</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42163"></span>42163</td>
<td class="instruction">AND 247</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42165"></span>42165</td>
<td class="instruction">OR C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42166"></span>42166</td>
<td class="instruction">LD (IX+0),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="42169"></span>42169</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="41921.html">41921</a>
</td>
<td class="up">Up: <a href="../maps/all.html#41983">Map</a></td>
<td class="next">
Next: <a href="42170.html">42170</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div><a href="../../asm/A3FF.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>