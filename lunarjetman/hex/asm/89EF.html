<!DOCTYPE html>
<html>
<head>
<title>Lunar Jetman: Routine at 89EF</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="89BF.html">89BF</a>
</td>
<td class="up">Up: <a href="../maps/all.html#89ef">Map</a></td>
<td class="next">
Next: <a href="8A11.html">8A11</a>
</td>
</tr>
</table>
<div class="description">89EF: Print Character</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="894F.html">DisplayPlayerLives</a>, <a href="89BF.html">Score_1UP</a>, <a href="8A11.html">PrintStringColour</a>, <a href="8BBB.html">8BBB</a>, <a href="8C01.html">8C01</a>, <a href="F232.html">F232</a>, <a href="F295.html">F295</a>, <a href="F410.html">HallOfFame</a>, <a href="F4C6.html">HighScoreMessaging</a> and <a href="F632.html">F632</a>.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">ASCII value to print</td>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Screen address</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">PrintScreen</td>
<td class="address-2"><span id="89ef"></span>89EF</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="3">Stash <span class="register">BC</span>, <span class="register">DE</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f0"></span>89F0</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f1"></span>89F1</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f2"></span>89F2</td>
<td class="instruction">SUB $20</td>
<td class="comment-1" rowspan="3">Create an offset in <span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f4"></span>89F4</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f5"></span>89F5</td>
<td class="instruction">LD H,$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f7"></span>89F7</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="3"><span class="register">HL</span>=<span class="register">HL</span> * 8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f8"></span>89F8</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89f9"></span>89F9</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89fa"></span>89FA</td>
<td class="instruction">LD DE,($5E04)</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="5E04.html">FontPointer</a> (main font is <a href="D347.html">MainFont</a>).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89fe"></span>89FE</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="2"><span class="register">DE</span>=<span class="register">HL</span> + <span class="register">DE</span>. For examples of usage; <table class="default">
<tr>
<th colspan="1" rowspan="1">Letter</th>
<th colspan="1" rowspan="1">ASCII Value</th>
<th colspan="1" rowspan="1">- 20 * 08 (offset)</th>
<th colspan="1" rowspan="1">CHARS + offset</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#85;&quot;</td>
<td class="centre" colspan="1" rowspan="1">55</td>
<td class="centre" colspan="1" rowspan="1">01A8</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d4ef">D4EF</a></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#76;&quot;</td>
<td class="centre" colspan="1" rowspan="1">4C</td>
<td class="centre" colspan="1" rowspan="1">0160</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d4a7">D4A7</a></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#84;&quot;</td>
<td class="centre" colspan="1" rowspan="1">54</td>
<td class="centre" colspan="1" rowspan="1">01A0</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d4e7">D4E7</a></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#73;&quot;</td>
<td class="centre" colspan="1" rowspan="1">49</td>
<td class="centre" colspan="1" rowspan="1">0148</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d48f">D48F</a></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#77;&quot;</td>
<td class="centre" colspan="1" rowspan="1">4D</td>
<td class="centre" colspan="1" rowspan="1">0168</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d4af">D4AF</a></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#65;&quot;</td>
<td class="centre" colspan="1" rowspan="1">41</td>
<td class="centre" colspan="1" rowspan="1">0108</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d44f">D44F</a></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#84;&quot;</td>
<td class="centre" colspan="1" rowspan="1">54</td>
<td class="centre" colspan="1" rowspan="1">01A0</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d4e7">D4E7</a></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">&quot;&#69;&quot;</td>
<td class="centre" colspan="1" rowspan="1">45</td>
<td class="centre" colspan="1" rowspan="1">0128</td>
<td class="centre" colspan="1" rowspan="1"><a href="D347.html#d46f">D46F</a></td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="89ff"></span>89FF</td>
<td class="instruction">EX DE,HL</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8a00"></span>
<div class="comments">
<div class="paragraph">
Print the character to the screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a00"></span>8A00</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span>, containing the screen buffer location, from the stack.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8a01"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="894F.html">DisplayPlayerLives</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">PrintScreen_0</td>
<td class="address-2"><span id="8a01"></span>8A01</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=08 (08 rows of pixels).</td>
</tr>
<tr>
<td class="asm-label">PrintScreen_Loop</td>
<td class="address-2"><span id="8a03"></span>8A03</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="2">Copy a byte from the font data to the screen buffer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a04"></span>8A04</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a05"></span>8A05</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1">Increment the font data by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a06"></span>8A06</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Move onto the next pixel line.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a07"></span>8A07</td>
<td class="instruction">DJNZ <a href="89EF.html#8a03">PrintScreen_Loop</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="89EF.html#8a03">PrintScreen_Loop</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a09"></span>8A09</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="2">Restore <span class="register">DE</span> and <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a0a"></span>8A0A</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8a0b"></span>
<div class="comments">
<div class="paragraph">
Reset <span class="register">HL</span> and move to the next column, ready to print the next character.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a0b"></span>8A0B</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="3"><span class="register">H</span>=<span class="register">H</span> - 08 (reset the display line).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a0c"></span>8A0C</td>
<td class="instruction">SUB $08</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a0e"></span>8A0E</td>
<td class="instruction">LD H,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a0f"></span>8A0F</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Increment screen column by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8a10"></span>8A10</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<div class="comments">
<div class="paragraph">
View the equivalent code in; <ul class="">
<li><a href="../../../aticatac/hex/asm/A1D3.html">Atic Atac</a></li>
<li><a href="../../../cookie/hex/asm/7468.html">Cookie</a></li>
<li><a href="../../../jetpac/hex/asm/714C.html">Jetpac</a></li>
<li><a href="../../../pssst/hex/asm/73CD.html">Pssst</a></li>
<li><a href="../../../tranzam/hex/asm/6C96.html">Tranz Am</a></li>
</ul>
</div>
</div>
</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="89BF.html">89BF</a>
</td>
<td class="up">Up: <a href="../maps/all.html#89ef">Map</a></td>
<td class="next">
Next: <a href="8A11.html">8A11</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.6.</div>
<div><a href="../../dec/asm/35311.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>