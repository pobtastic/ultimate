<!DOCTYPE html>
<html>
<head>
<title>Sabre Wulf: Routine at 9960</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="995A.html">995A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#9960">Map</a></td>
<td class="next">
Next: <a href="99F0.html">99F0</a>
</td>
</tr>
</table>
<div class="description">9960: Game Initialisation</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameInitialisation</td>
<td class="address-2"><span id="9960"></span>9960</td>
<td class="instruction">CALL <a href="BB9F.html">ClearBuffers</a></td>
<td class="comment-1" rowspan="1">Call <a href="BB9F.html">ClearBuffers</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9963"></span>9963</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Set the border to black.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9964"></span>9964</td>
<td class="instruction">OUT ($FE),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9966"></span>9966</td>
<td class="instruction">CALL <a href="BB8F.html">ResetAttributes</a></td>
<td class="comment-1" rowspan="1">Call <a href="BB8F.html">ResetAttributes</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9969"></span>9969</td>
<td class="instruction">CALL <a href="BB81.html">ResetScreen</a></td>
<td class="comment-1" rowspan="1">Call <a href="BB81.html">ResetScreen</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="996c"></span>996C</td>
<td class="instruction">CALL <a href="B902.html">$B902</a></td>
<td class="comment-1" rowspan="1">Call <a href="B902.html">B902</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="996f"></span>
<div class="comments">
<div class="paragraph">
Set the attributes for the top banner (the whole line is INK:47).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="996f"></span>996F</td>
<td class="instruction">LD HL,$5800</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=5800 (attribute buffer).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9972"></span>9972</td>
<td class="instruction">LD BC,$2047</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=counter:20 INK:47.</td>
</tr>
<tr>
<td class="asm-label">CreateWindow_Loop_Banner</td>
<td class="address-2"><span id="9975"></span>9975</td>
<td class="instruction">LD (HL),C</td>
<td class="comment-1" rowspan="1">Write 47 to the attribute buffer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9976"></span>9976</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Move onto the next column.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9977"></span>9977</td>
<td class="instruction">DJNZ <a href="9960.html#9975">CreateWindow_Loop_Banner</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="9960.html#9975">CreateWindow_Loop_Banner</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9979"></span>9979</td>
<td class="instruction">CALL <a href="B563.html">PrintBanner</a></td>
<td class="comment-1" rowspan="1">Call <a href="B563.html">PrintBanner</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="997c"></span>
<div class="comments">
<div class="paragraph">
Set the attributes for the score line (the whole line is INK:46).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="997c"></span>997C</td>
<td class="instruction">LD HL,$5820</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=5820 (attribute buffer).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="997f"></span>997F</td>
<td class="instruction">LD BC,$2046</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=counter:20 INK:46.</td>
</tr>
<tr>
<td class="asm-label">CreateWindow_Loop_Score</td>
<td class="address-2"><span id="9982"></span>9982</td>
<td class="instruction">LD (HL),C</td>
<td class="comment-1" rowspan="1">Write 46 to the attribute buffer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9983"></span>9983</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Move onto the next column.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9984"></span>9984</td>
<td class="instruction">DJNZ <a href="9960.html#9982">CreateWindow_Loop_Score</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="9960.html#9982">CreateWindow_Loop_Score</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9986"></span>9986</td>
<td class="instruction">CALL <a href="B5CC.html">Score_1UP</a></td>
<td class="comment-1" rowspan="1">Call <a href="B5CC.html">Score_1UP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9989"></span>9989</td>
<td class="instruction">CALL <a href="B5CC.html#b5d4">Score_2UP</a></td>
<td class="comment-1" rowspan="1">Call <a href="B5CC.html#b5d4">Score_2UP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="998c"></span>998C</td>
<td class="instruction">CALL <a href="B5CC.html#b5dc">Score_HI</a></td>
<td class="comment-1" rowspan="1">Call <a href="B5CC.html#b5dc">Score_HI</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="998f"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="AA6A.html">GameOver_1UP</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Game_Restart</td>
<td class="address-2"><span id="998f"></span>998F</td>
<td class="instruction">CALL <a href="B3D5.html">HandlerGameMenu</a></td>
<td class="comment-1" rowspan="1">Call <a href="B3D5.html">HandlerGameMenu</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9992"></span>
<div class="comments">
<div class="paragraph">
Writes 00 to every address from <a href="9698.html">1UP_Score_1</a> to <a href="995A.html">SecurityCheck</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9992"></span>9992</td>
<td class="instruction">LD HL,$9698</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=9698.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9995"></span>9995</td>
<td class="instruction">LD BC,$02C2</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=02C2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9998"></span>9998</td>
<td class="instruction">CALL <a href="BB9F.html#bba5">ClearBuffers_Loop</a></td>
<td class="comment-1" rowspan="1">Call <a href="BB9F.html#bba5">ClearBuffers_Loop</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="999b"></span>999B</td>
<td class="instruction">CALL <a href="B5CC.html">Score_1UP</a></td>
<td class="comment-1" rowspan="1">Call <a href="B5CC.html">Score_1UP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="999e"></span>999E</td>
<td class="instruction">CALL <a href="B5CC.html#b5d4">Score_2UP</a></td>
<td class="comment-1" rowspan="1">Call <a href="B5CC.html#b5d4">Score_2UP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99a1"></span>99A1</td>
<td class="instruction">LD DE,$BD45</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="BC67.html#bd45">MusicData_GameInitialisation</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99a4"></span>99A4</td>
<td class="instruction">CALL <a href="BD6E.html">PlayAudio</a></td>
<td class="comment-1" rowspan="1">Call <a href="BD6E.html">PlayAudio</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99a7"></span>99A7</td>
<td class="instruction">CALL <a href="B1D4.html">$B1D4</a></td>
<td class="comment-1" rowspan="1">Call <a href="B1D4.html">B1D4</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="99aa"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="9A1D.html">9A1D</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameInitialisation_0</td>
<td class="address-2"><span id="99aa"></span>99AA</td>
<td class="instruction">LD SP,$6000</td>
<td class="comment-1" rowspan="1"><span class="register">SP</span>=<a href="6000.html">GameEntry</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99ad"></span>99AD</td>
<td class="instruction">EI</td>
<td class="comment-1" rowspan="1">Enable interrupts.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99ae"></span>99AE</td>
<td class="instruction">LD IX,$970E</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="9702.html#970e">970E</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="99b2"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="99F0.html">99F0</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameInitialisation_1</td>
<td class="address-2"><span id="99b2"></span>99B2</td>
<td class="instruction">LD A,($5C78)</td>
<td class="comment-1" rowspan="2"><span class="register">C</span>=<a href="https://skoolkid.github.io/rom/asm/5C78.html">FRAMES</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99b5"></span>99B5</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99b6"></span>99B6</td>
<td class="instruction">LD A,($9696)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="9696.html">LastFrame</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99b9"></span>99B9</td>
<td class="instruction">CP C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99ba"></span>99BA</td>
<td class="instruction">JR Z,<a href="9960.html#99d0">GameInitialisation_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">FrameUpdate</td>
<td class="address-1"><span id="99bc"></span>99BC</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">Disable interrupts.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99bd"></span>99BD</td>
<td class="instruction">LD A,($5C78)</td>
<td class="comment-1" rowspan="2">Store <a href="https://skoolkid.github.io/rom/asm/5C78.html">FRAMES</a> at <a href="9696.html">LastFrame</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99c0"></span>99C0</td>
<td class="instruction">LD ($9696),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99c3"></span>99C3</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Set <a href="9697.html">FrameUpdated</a> to 01 (frame has updated).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99c5"></span>99C5</td>
<td class="instruction">LD ($9697),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99c8"></span>99C8</td>
<td class="instruction">LD ($96A9),IX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99cc"></span>99CC</td>
<td class="instruction">LD IX,$9702</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="9702.html">ImmortalData</a>.</td>
</tr>
<tr>
<td class="asm-label">GameInitialisation_2</td>
<td class="address-2"><span id="99d0"></span>99D0</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99d2"></span>99D2</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99d3"></span>99D3</td>
<td class="instruction">LD A,($9695)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99d6"></span>99D6</td>
<td class="instruction">ADC A,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99d7"></span>99D7</td>
<td class="instruction">LD ($9695),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99da"></span>99DA</td>
<td class="instruction">LD HL,$99F0</td>
<td class="comment-1" rowspan="2">Push <a href="99F0.html">99F0</a> onto the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99dd"></span>99DD</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99de"></span>99DE</td>
<td class="instruction">LD BC,$9B3E</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=<a href="9B3E.html">JumpTable</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99e1"></span>99E1</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99e4"></span>99E4</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99e5"></span>99E5</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99e7"></span>99E7</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99e8"></span>99E8</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99e9"></span>99E9</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99ea"></span>99EA</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99eb"></span>99EB</td>
<td class="instruction">LD H,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99ec"></span>99EC</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="99ed"></span>99ED</td>
<td class="instruction">JP <a href="5CB0.html">IndirectJump</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<div class="comments">
<div class="paragraph">
View the equivalent code in; <ul class="">
<li><a href="/ultimate/aticatac/asm/7C19.html">Atic Atac</a></li>
<li><a href="/ultimate/jetpac/asm/61EB.html">Jetpac</a></li>
<li><a href="/ultimate/lunarjetman/asm/800A.html">Lunar Jetman</a></li>
<li><a href="/ultimate/pssst/asm/61CD.html">Pssst</a></li>
<li><a href="/ultimate/tranzam/asm/5F07.html">Tranz Am</a></li>
</ul>
</div>
</div>
</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="995A.html">995A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#9960">Map</a></td>
<td class="next">
Next: <a href="99F0.html">99F0</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 Ultimate Play the Game &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.0.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/ultimate/tree/main/sources/sabrewulf/">Source code</a>.</div>
<div><a href="asm/9960.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>