<!DOCTYPE html>
<html>
<head>
<title>Sabre Wulf: Routine at 44072</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="44068.html">44068</a>
</td>
<td class="up">Up: <a href="../maps/all.html#44072">Map</a></td>
<td class="next">
Next: <a href="44151.html">44151</a>
</td>
</tr>
</table>
<div class="description">44072: Routine at AC28</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="39453.html">39453</a>, <a href="40810.html">GameComplete</a> and <a href="41479.html">41479</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="44072"></span>44072</td>
<td class="instruction">EI</td>
<td class="comment-1" rowspan="1">Enable interrupts.</td>
</tr>
<tr>
<td class="address-1"><span id="44073"></span>44073</td>
<td class="instruction">LD A,126</td>
<td class="comment-1" rowspan="3">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">126</td>
<td class="centre" colspan="1" rowspan="1">SPACE</td>
<td class="centre" colspan="1" rowspan="1">FULL-STOP</td>
<td class="centre" colspan="1" rowspan="1">M</td>
<td class="centre" colspan="1" rowspan="1">N</td>
<td class="centre" colspan="1" rowspan="1">B</td>
<td class="" colspan="1" rowspan="1">Shift</td>
<td class="" colspan="1" rowspan="1">Z</td>
<td class="" colspan="1" rowspan="1">X</td>
<td class="" colspan="1" rowspan="1">C</td>
<td class="" colspan="1" rowspan="1">V</td>
</tr>
</table></td>
</tr>
<tr>
<td class="address-1"><span id="44075"></span>44075</td>
<td class="instruction">OUT (253),A</td>
</tr>
<tr>
<td class="address-1"><span id="44077"></span>44077</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="address-1"><span id="44079"></span>44079</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44081"></span>44081</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44082"></span>44082</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="1">Flip the bits.</td>
</tr>
<tr>
<td class="address-1"><span id="44083"></span>44083</td>
<td class="instruction">AND %00011110</td>
<td class="comment-1" rowspan="1">Keep only bits 1-4.</td>
</tr>
<tr>
<td class="address-1"><span id="44085"></span>44085</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="44086"></span>44086</td>
<td class="instruction">LD A,126</td>
<td class="comment-1" rowspan="3">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">126</td>
<td class="centre" colspan="1" rowspan="1">SPACE</td>
<td class="centre" colspan="1" rowspan="1">FULL-STOP</td>
<td class="centre" colspan="1" rowspan="1">M</td>
<td class="centre" colspan="1" rowspan="1">N</td>
<td class="centre" colspan="1" rowspan="1">B</td>
<td class="" colspan="1" rowspan="1">Shift</td>
<td class="" colspan="1" rowspan="1">Z</td>
<td class="" colspan="1" rowspan="1">X</td>
<td class="" colspan="1" rowspan="1">C</td>
<td class="" colspan="1" rowspan="1">V</td>
</tr>
</table></td>
</tr>
<tr>
<td class="address-1"><span id="44088"></span>44088</td>
<td class="instruction">OUT (253),A</td>
</tr>
<tr>
<td class="address-1"><span id="44090"></span>44090</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="address-1"><span id="44092"></span>44092</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44094"></span>44094</td>
<td class="instruction">JR Z,<a href="44072.html#44086">44086</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="44096"></span>44096</td>
<td class="instruction">LD HL,23672</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>=<a href="https://skoolkid.github.io/rom/asm/5C78.html">FRAMES</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="44099"></span>44099</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-2"><span id="44100"></span>44100</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44101"></span>44101</td>
<td class="instruction">JR Z,<a href="44072.html#44100">44100</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44103"></span>44103</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44104"></span>44104</td>
<td class="instruction">ADD A,4</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44106"></span>44106</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44107"></span>44107</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44108"></span>44108</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44109"></span>44109</td>
<td class="instruction">AND %00000010</td>
<td class="comment-1" rowspan="1">Keep only bit 1.</td>
</tr>
<tr>
<td class="address-1"><span id="44111"></span>44111</td>
<td class="instruction">OR %00000001</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44113"></span>44113</td>
<td class="instruction">OUT (254),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44115"></span>44115</td>
<td class="instruction">LD A,126</td>
<td class="comment-1" rowspan="3">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">126</td>
<td class="centre" colspan="1" rowspan="1">SPACE</td>
<td class="centre" colspan="1" rowspan="1">FULL-STOP</td>
<td class="centre" colspan="1" rowspan="1">M</td>
<td class="centre" colspan="1" rowspan="1">N</td>
<td class="centre" colspan="1" rowspan="1">B</td>
<td class="" colspan="1" rowspan="1">Shift</td>
<td class="" colspan="1" rowspan="1">Z</td>
<td class="" colspan="1" rowspan="1">X</td>
<td class="" colspan="1" rowspan="1">C</td>
<td class="" colspan="1" rowspan="1">V</td>
</tr>
</table></td>
</tr>
<tr>
<td class="address-1"><span id="44117"></span>44117</td>
<td class="instruction">OUT (253),A</td>
</tr>
<tr>
<td class="address-1"><span id="44119"></span>44119</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="address-1"><span id="44121"></span>44121</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44123"></span>44123</td>
<td class="instruction">JR NZ,<a href="44072.html#44096">44096</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="44125"></span>44125</td>
<td class="instruction">LD A,126</td>
<td class="comment-1" rowspan="3">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">126</td>
<td class="centre" colspan="1" rowspan="1">SPACE</td>
<td class="centre" colspan="1" rowspan="1">FULL-STOP</td>
<td class="centre" colspan="1" rowspan="1">M</td>
<td class="centre" colspan="1" rowspan="1">N</td>
<td class="centre" colspan="1" rowspan="1">B</td>
<td class="" colspan="1" rowspan="1">Shift</td>
<td class="" colspan="1" rowspan="1">Z</td>
<td class="" colspan="1" rowspan="1">X</td>
<td class="" colspan="1" rowspan="1">C</td>
<td class="" colspan="1" rowspan="1">V</td>
</tr>
</table></td>
</tr>
<tr>
<td class="address-1"><span id="44127"></span>44127</td>
<td class="instruction">OUT (253),A</td>
</tr>
<tr>
<td class="address-1"><span id="44129"></span>44129</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="address-1"><span id="44131"></span>44131</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44133"></span>44133</td>
<td class="instruction">JR Z,<a href="44072.html#44125">44125</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44135"></span>44135</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44136"></span>44136</td>
<td class="instruction">OUT (254),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="44138"></span>44138</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="44139"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="45598.html">45598</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="44139"></span>44139</td>
<td class="instruction">LD HL,44151</td>
<td class="comment-1" rowspan="4">Copy 144 bytes of data from <a href="44151.html">44151</a> to <a href="38586.html#38658">38658</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="44142"></span>44142</td>
<td class="instruction">LD DE,38658</td>
</tr>
<tr>
<td class="address-1"><span id="44145"></span>44145</td>
<td class="instruction">LD BC,144</td>
</tr>
<tr>
<td class="address-1"><span id="44148"></span>44148</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="44150"></span>44150</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="44068.html">44068</a>
</td>
<td class="up">Up: <a href="../maps/all.html#44072">Map</a></td>
<td class="next">
Next: <a href="44151.html">44151</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div><a href="../../asm/AC28.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>