<!DOCTYPE html>
<html>
<head>
<title>Sabre Wulf: Routine at 47417</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="47412.html">47412</a>
</td>
<td class="up">Up: <a href="../maps/all.html#47417">Map</a></td>
<td class="next">
Next: <a href="47465.html">47465</a>
</td>
</tr>
</table>
<div class="description">47417: Prepare Draw 2/ 3 Byte Sprite</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="47349.html">RemoveEntity</a> and <a href="47529.html">DisplayEntity</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">PrepDraw23</td>
<td class="address-2"><span id="47417"></span>47417</td>
<td class="instruction">CALL <a href="47397.html">GetSpriteA</a></td>
<td class="comment-1" rowspan="1">Call <a href="47397.html">GetSpriteA</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47420"></span>47420</td>
<td class="instruction">LD HL,(38560)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="38560.html">Saved_X</a> (saved X position).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47423"></span>47423</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47424"></span>47424</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47425"></span>47425</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47426"></span>47426</td>
<td class="instruction">AND %00001110</td>
<td class="comment-1" rowspan="1">Keep only bits 1-3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47428"></span>47428</td>
<td class="instruction">OR %11110000</td>
<td class="comment-1" rowspan="1">Set bits 4-7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47430"></span>47430</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">Store the result in <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47431"></span>47431</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47432"></span>47432</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47433"></span>47433</td>
<td class="instruction">NEG</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47435"></span>47435</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47437"></span>47437</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47438"></span>47438</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47439"></span>47439</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47440"></span>47440</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47441"></span>47441</td>
<td class="instruction">ADD A,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47442"></span>47442</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47443"></span>47443</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47444"></span>47444</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47446"></span>47446</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47447"></span>47447</td>
<td class="instruction">JR NZ,<a href="47417.html#47451">PrepDraw23_0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47449"></span>47449</td>
<td class="instruction">ADD A,6</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">PrepDraw23_0</td>
<td class="address-2"><span id="47451"></span>47451</td>
<td class="instruction">LD (47635),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47454"></span>47454</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47455"></span>47455</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47456"></span>47456</td>
<td class="instruction">LD (38563),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to <a href="38563.html">SomeHeight</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47459"></span>47459</td>
<td class="instruction">CALL <a href="47277.html">ScreenAddress</a></td>
<td class="comment-1" rowspan="1">Call <a href="47277.html">ScreenAddress</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47462"></span>47462</td>
<td class="instruction">LD C,0</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="47464"></span>47464</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="47412.html">47412</a>
</td>
<td class="up">Up: <a href="../maps/all.html#47417">Map</a></td>
<td class="next">
Next: <a href="47465.html">47465</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 Ultimate Play the Game &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.0.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/ultimate/tree/main/sources/sabrewulf/">Source code</a>.</div>
<div><a href="asm/47417.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>