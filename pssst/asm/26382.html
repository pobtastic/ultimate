<!DOCTYPE html>
<html>
<head>
<title>PSSST: Routine at 670E</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="ultimate" src="../images/ultimate.png" /> <img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="26327.html">66D7</a>
</td>
<td class="up">Up: <a href="../maps/all.html#670e">Map</a></td>
<td class="next">
Next: <a href="26503.html">6787</a>
</td>
</tr>
</table>
<div class="description">670E: Colourise Open Flower</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="26278.html">66A6</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ColouriseFlower</td>
<td class="address-2"><span id="670e"></span>670E</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6711"></span>6711</td>
<td class="instruction">SUB $20</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6713"></span>6713</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6714"></span>6714</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6717"></span>6717</td>
<td class="instruction">SUB $30</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6719"></span>6719</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="671a"></span>671A</td>
<td class="instruction">CALL <a href="29839.html">AttributeAddress</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="671d"></span>671D</td>
<td class="instruction">LD DE,$6748</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="26382.html#6748">FlowerAttributes</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6720"></span>6720</td>
<td class="instruction">LD BC,$0907</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=0907.</td>
</tr>
<tr>
<td class="asm-label">ColouriseFlower_0</td>
<td class="address-2"><span id="6723"></span>6723</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6724"></span>6724</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">ColouriseFlower_1</td>
<td class="address-2"><span id="6725"></span>6725</td>
<td class="instruction">LD A,($5E37)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6728"></span>6728</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6729"></span>6729</td>
<td class="instruction">JR Z,<a href="26382.html#673f">ColouriseFlower_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="672b"></span>672B</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="672d"></span>672D</td>
<td class="instruction">JR NZ,<a href="26382.html#673f">ColouriseFlower_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="672f"></span>672F</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">ColouriseFlower_2</td>
<td class="address-2"><span id="6730"></span>6730</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6731"></span>6731</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6732"></span>6732</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6733"></span>6733</td>
<td class="instruction">DJNZ <a href="26382.html#6725">ColouriseFlower_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6735"></span>6735</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6736"></span>6736</td>
<td class="instruction">LD BC,$0020</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6739"></span>6739</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="673a"></span>673A</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="673b"></span>673B</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="673c"></span>673C</td>
<td class="instruction">JR NZ,<a href="26382.html#6723">ColouriseFlower_0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="673e"></span>673E</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">ColouriseFlower_3</td>
<td class="address-2"><span id="673f"></span>673F</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6740"></span>6740</td>
<td class="instruction">CP $5E</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6742"></span>6742</td>
<td class="instruction">JR NZ,<a href="26382.html#6730">ColouriseFlower_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6744"></span>6744</td>
<td class="instruction">LD A,$5B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6746"></span>6746</td>
<td class="instruction">JR <a href="26382.html#6730">ColouriseFlower_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">FlowerAttributes</td>
<td class="address-1"><span id="6748"></span>6748</td>
<td class="instruction">DEFB $44,$44,$44,$44,$44,$44,$44,$44,$44</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6751"></span>6751</td>
<td class="instruction">DEFB $44,$63,$63,$5E,$5E,$5E,$63,$63,$44</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="675a"></span>675A</td>
<td class="instruction">DEFB $44,$63,$63,$5E,$5E,$5E,$63,$63,$44</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6763"></span>6763</td>
<td class="instruction">DEFB $44,$63,$5E,$5E,$5E,$5E,$5E,$63,$44</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="676c"></span>676C</td>
<td class="instruction">DEFB $44,$63,$63,$63,$5E,$5E,$63,$63,$44</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6775"></span>6775</td>
<td class="instruction">DEFB $44,$44,$44,$44,$44,$44,$44,$44,$44</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="677e"></span>677E</td>
<td class="instruction">DEFB $44,$44,$44,$44,$44,$44,$44,$44,$44</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="26327.html">66D7</a>
</td>
<td class="up">Up: <a href="../maps/all.html#670e">Map</a></td>
<td class="next">
Next: <a href="26503.html">6787</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.5.</div>
</footer>
</body>
</html>