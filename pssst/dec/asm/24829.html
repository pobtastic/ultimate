<!DOCTYPE html>
<html>
<head>
<title>PSSST: Routine at 24829</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="ultimate" src="../images/ultimate.png" /> <img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="24720.html">24720</a>
</td>
<td class="up">Up: <a href="../maps/all.html#24829">Map</a></td>
<td class="next">
Next: <a href="24891.html">24891</a>
</td>
</tr>
</table>
<div class="description">24829: Game Over</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24829"></span>
<div class="comments">
<div class="paragraph">
Set up altering the "GAME OVER PLAYER <em>X</em>" message for 1UP.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameOver1UP</td>
<td class="address-2"><span id="24829"></span>24829</td>
<td class="instruction">LD A,"1"+128</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>="1" + 128 (escape character).</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24831"></span>
<div class="comments">
<div class="paragraph">
Print the messaging and pause to show it for a period of time.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameOver_Write</td>
<td class="address-2"><span id="24831"></span>24831</td>
<td class="instruction">LD (24949),A</td>
<td class="comment-1" rowspan="1">Write ASCII player number to <a href="24931.html">24949</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24834"></span>24834</td>
<td class="instruction">CALL <a href="24403.html">CreateWindow</a></td>
<td class="comment-1" rowspan="1">Call <a href="24403.html">CreateWindow</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24837"></span>24837</td>
<td class="instruction">LD DE,24931</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="24931.html">Message_GameOver</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24840"></span>24840</td>
<td class="instruction">LD HL,28728</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=28728.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24843"></span>
<div class="comments">
<div class="paragraph">
Print message and pause, also used by <a href="24496.html">24496</a> and <a href="25374.html">Message_SprayBugs</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameOverPrint_Pause</td>
<td class="address-2"><span id="24843"></span>24843</td>
<td class="instruction">CALL <a href="29677.html">PrintString</a></td>
<td class="comment-1" rowspan="1">Call <a href="29677.html">PrintString</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24846"></span>
<div class="comments">
<div class="paragraph">
Introduce a pause by counting down from 65536 four times.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24846"></span>24846</td>
<td class="instruction">LD B,4</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=4 (counter).</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24848"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="26327.html">26327</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameOverPause</td>
<td class="address-2"><span id="24848"></span>24848</td>
<td class="instruction">LD HL,0</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=0 (large counter).</td>
</tr>
<tr>
<td class="asm-label">GameOverPause_Loop</td>
<td class="address-2"><span id="24851"></span>24851</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24852"></span>24852</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="3">Loop back to <a href="24829.html#24851">GameOverPause_Loop</a> until <span class="register">HL</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24853"></span>24853</td>
<td class="instruction">OR L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24854"></span>24854</td>
<td class="instruction">JR NZ,<a href="24829.html#24851">GameOverPause_Loop</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24856"></span>24856</td>
<td class="instruction">DJNZ <a href="24829.html#24851">GameOverPause_Loop</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="24829.html#24851">GameOverPause_Loop</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24858"></span>24858</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24859"></span>
<div class="comments">
<div class="paragraph">
Set up altering the "GAME OVER PLAYER <em>X</em>" message for 2UP.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameOver2UP</td>
<td class="address-2"><span id="24859"></span>24859</td>
<td class="instruction">LD A,"2"+128</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>="2" + 128 (escape character).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24861"></span>24861</td>
<td class="instruction">JR <a href="24829.html#24831">GameOver_Write</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="24829.html#24831">GameOver_Write</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24863"></span>
<div class="comments">
<div class="paragraph">
This controller simply returns on end. This is for when the game continues after the messaging.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameOver_Controller</td>
<td class="address-2"><span id="24863"></span>24863</td>
<td class="instruction">LD A,(24094)</td>
<td class="comment-1" rowspan="3">If <a href="24094.html">Current_Player</a> is zero, jump to <a href="24829.html#24848">GameOverPause</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24866"></span>24866</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24867"></span>24867</td>
<td class="instruction">JR Z,<a href="24829.html#24829">GameOver1UP</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24869"></span>24869</td>
<td class="instruction">JR <a href="24829.html#24859">GameOver2UP</a></td>
<td class="comment-1" rowspan="1">Else, jump to <a href="24829.html#24859">GameOver2UP</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="24871"></span>
<div class="comments">
<div class="paragraph">
This is a controller with a jump to <a href="25037.html#25066">Game_Restart</a> to return to the game selection screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GameOver_ControllerRestart</td>
<td class="address-2"><span id="24871"></span>24871</td>
<td class="instruction">CALL <a href="28401.html#28815">28815</a></td>
<td class="comment-1" rowspan="1">Call <a href="28401.html#28815">28815</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24874"></span>24874</td>
<td class="instruction">LD A,(24094)</td>
<td class="comment-1" rowspan="3">If <a href="24094.html">Current_Player</a> is not zero, jump to <a href="24829.html#24886">GameOver_Restart2UP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24877"></span>24877</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24878"></span>24878</td>
<td class="instruction">JR NZ,<a href="24829.html#24886">GameOver_Restart2UP</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24880"></span>24880</td>
<td class="instruction">CALL <a href="24829.html#24829">GameOver1UP</a></td>
<td class="comment-1" rowspan="1">Call <a href="24829.html">GameOver1UP</a>.</td>
</tr>
<tr>
<td class="asm-label">GameOver_Restart</td>
<td class="address-2"><span id="24883"></span>24883</td>
<td class="instruction">JP <a href="25037.html#25066">Game_Restart</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="25037.html#25066">Game_Restart</a>.</td>
</tr>
<tr>
<td class="asm-label">GameOver_Restart2UP</td>
<td class="address-2"><span id="24886"></span>24886</td>
<td class="instruction">CALL <a href="24829.html#24859">GameOver2UP</a></td>
<td class="comment-1" rowspan="1">Call <a href="24829.html#24859">GameOver2UP</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="24889"></span>24889</td>
<td class="instruction">JR <a href="24829.html#24883">GameOver_Restart</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="24829.html#24883">GameOver_Restart</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="24720.html">24720</a>
</td>
<td class="up">Up: <a href="../maps/all.html#24829">Map</a></td>
<td class="next">
Next: <a href="24891.html">24891</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.6.</div>
<div><a href="../../hex/asm/60FD.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>