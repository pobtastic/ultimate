<!DOCTYPE html>
<html>
<head>
<title>Cookie: Routine at 6D87</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="6D7D.html">6D7D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#6d87">Map</a></td>
<td class="next">
Next: <a href="6E25.html">6E25</a>
</td>
</tr>
</table>
<div class="description">6D87: Routine at 6D87</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="6d87"></span>6D87</td>
<td class="instruction">DEFB $01,$47</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d89"></span>6D89</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">IX</span>+00.</td>
</tr>
<tr>
<td class="address-1"><span id="6d8c"></span>6D8C</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="6d8d"></span>6D8D</td>
<td class="instruction">CP $07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d8f"></span>6D8F</td>
<td class="instruction">JR NZ,<a href="6D87.html#6d97">$6D97</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d91"></span>6D91</td>
<td class="instruction">LD A,($5F29)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d94"></span>6D94</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d95"></span>6D95</td>
<td class="instruction">JR Z,<a href="6D87.html#6df0">$6DF0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6d97"></span>6D97</td>
<td class="instruction">LD A,(IX+$05)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d9a"></span>6D9A</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d9b"></span>6D9B</td>
<td class="instruction">JR NZ,<a href="6D87.html#6db6">$6DB6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6d9d"></span>6D9D</td>
<td class="instruction">INC (IX+$05)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6da0"></span>6DA0</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6da3"></span>6DA3</td>
<td class="instruction">LD (IX+$00),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6da6"></span>6DA6</td>
<td class="instruction">CALL <a href="75CC.html#7617">$7617</a></td>
<td class="comment-1" rowspan="1">Call <a href="75CC.html#7617">7617</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6da9"></span>6DA9</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="6daa"></span>6DAA</td>
<td class="instruction">LD (IX+$00),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dad"></span>6DAD</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6dae"></span>
<div class="comments">
<div class="paragraph">
1
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="6dae"></span>6DAE</td>
<td class="instruction">LD A,$02</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=02.</td>
</tr>
<tr>
<td class="address-1"><span id="6db0"></span>6DB0</td>
<td class="instruction">JR <a href="6D87.html#6dd3">$6DD3</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="6D87.html#6dd3">6DD3</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6db2"></span>
<div class="comments">
<div class="paragraph">
2
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="6db2"></span>6DB2</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=01.</td>
</tr>
<tr>
<td class="address-1"><span id="6db4"></span>6DB4</td>
<td class="instruction">JR <a href="6D87.html#6dd3">$6DD3</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="6D87.html#6dd3">6DD3</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6db6"></span>
<div class="comments">
<div class="paragraph">
2
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="6db6"></span>6DB6</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6db9"></span>6DB9</td>
<td class="instruction">LD (IX+$00),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dbc"></span>6DBC</td>
<td class="instruction">CALL <a href="76D0.html">$76D0</a></td>
<td class="comment-1" rowspan="1">Call <a href="76D0.html">76D0</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6dbf"></span>6DBF</td>
<td class="instruction">LD A,($5F1D)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dc2"></span>6DC2</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="address-1"><span id="6dc4"></span>6DC4</td>
<td class="instruction">JR NZ,<a href="6D87.html#6dd9">$6DD9</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dc6"></span>6DC6</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dc9"></span>6DC9</td>
<td class="instruction">CP $01</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dcb"></span>6DCB</td>
<td class="instruction">JR Z,<a href="6D87.html#6dae">$6DAE</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dcd"></span>6DCD</td>
<td class="instruction">CP $02</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dcf"></span>6DCF</td>
<td class="instruction">JR Z,<a href="6D87.html#6db2">$6DB2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dd1"></span>6DD1</td>
<td class="instruction">XOR $01</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6dd3"></span>6DD3</td>
<td class="instruction">LD (IX+$04),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dd6"></span>6DD6</td>
<td class="instruction">LD (IX+$00),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6dd9"></span>6DD9</td>
<td class="instruction">LD A,(IX+$01)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6ddc"></span>6DDC</td>
<td class="instruction">SUB $02</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dde"></span>6DDE</td>
<td class="instruction">LD (IX+$01),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6de1"></span>6DE1</td>
<td class="instruction">CP $90</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6de3"></span>6DE3</td>
<td class="instruction">CALL C,<a href="6D87.html#6e11">$6E11</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6de6"></span>6DE6</td>
<td class="instruction">CP $F8</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6de8"></span>6DE8</td>
<td class="instruction">JR NC,<a href="6D87.html#6e03">$6E03</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dea"></span>6DEA</td>
<td class="instruction">CALL <a href="75CC.html">$75CC</a></td>
<td class="comment-1" rowspan="1">Call <a href="75CC.html">75CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6ded"></span>6DED</td>
<td class="instruction">CALL <a href="74EE.html">$74EE</a></td>
<td class="comment-1" rowspan="1">Call <a href="74EE.html">74EE</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6df0"></span>
<div class="comments">
<div class="paragraph">
3
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="6df0"></span>6DF0</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="6df1"></span>6DF1</td>
<td class="instruction">LD (IX+$00),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6df4"></span>6DF4</td>
<td class="instruction">LD A,($5C78)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="https://skoolkid.github.io/rom/asm/5C78.html">FRAMES</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6df7"></span>6DF7</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="address-1"><span id="6df9"></span>6DF9</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dfa"></span>6DFA</td>
<td class="instruction">LD A,(IX+$03)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dfd"></span>6DFD</td>
<td class="instruction">CP $47</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6dff"></span>6DFF</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e00"></span>6E00</td>
<td class="instruction">JP <a href="6854.html">LevelStartJingle</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6e03"></span>6E03</td>
<td class="instruction">CALL <a href="75CC.html#7607">$7607</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e06"></span>6E06</td>
<td class="instruction">LD (IX+$00),$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e0a"></span>6E0A</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e0b"></span>6E0B</td>
<td class="instruction">CP $07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e0d"></span>6E0D</td>
<td class="instruction">JP Z,<a href="5FE1.html">$5FE1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e10"></span>6E10</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="address-2"><span id="6e11"></span>6E11</td>
<td class="instruction">LD A,($5F29)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e14"></span>6E14</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e15"></span>6E15</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e16"></span>6E16</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e17"></span>6E17</td>
<td class="instruction">LD ($5F29),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="6e1a"></span>6E1A</td>
<td class="instruction">LD HL,$5F35</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="5F35.html">BufferNasties</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6e1d"></span>6E1D</td>
<td class="instruction">LD DE,$6D87</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="6D87.html">6D87</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6e20"></span>6E20</td>
<td class="instruction">LD C,$07</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=07.</td>
</tr>
<tr>
<td class="address-1"><span id="6e22"></span>6E22</td>
<td class="instruction">JP <a href="6D38.html#6d67">$6D67</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="6D38.html#6d67">6D67</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="6D7D.html">6D7D</a>
</td>
<td class="up">Up: <a href="../maps/all.html#6d87">Map</a></td>
<td class="next">
Next: <a href="6E25.html">6E25</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.6.</div>
<div><a href="../../dec/asm/28039.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>