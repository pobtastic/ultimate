<!DOCTYPE html>
<html>
<head>
<title>Tranz Am: Routine at 70D2</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="70CE.html">70CE</a>
</td>
<td class="up">Up: <a href="../maps/all.html#70d2">Map</a></td>
<td class="next">
Next: <a href="7101.html">7101</a>
</td>
</tr>
</table>
<div class="description">70D2: Routine at 70D2</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="7101.html">ActorEraseMovedSprite</a> and <a href="7149.html">7149</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">FindActorSpriteAndUpdate</td>
<td class="address-2"><span id="70d2"></span>70D2</td>
<td class="instruction">CALL <a href="7155.html#7168">ActorGetSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="7155.html#7168">ActorGetSprite</a>.</td>
</tr>
<tr>
<td class="asm-label">ActorUpdate</td>
<td class="address-1"><span id="70d5"></span>70D5</td>
<td class="instruction">LD L,(IX+$01)</td>
<td class="comment-1" rowspan="2">Fetch actor co-ordinates.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70d8"></span>70D8</td>
<td class="instruction">LD H,(IX+$02)</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="70db"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="646C.html">DisplayCupsCollected</a> and <a href="687B.html">DisplayPlayerLives</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">FindActorSpriteAndUpdate_0</td>
<td class="address-2"><span id="70db"></span>70DB</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70dc"></span>70DC</td>
<td class="instruction">NEG</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70de"></span>70DE</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70e0"></span>70E0</td>
<td class="instruction">LD ($5E41),A</td>
<td class="comment-1" rowspan="1">Write this to <a href="5E41.html">5E41</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70e3"></span>70E3</td>
<td class="instruction">LD A,$02</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=02.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70e5"></span>70E5</td>
<td class="instruction">JR Z,<a href="70D2.html#70e8">FindActorSpriteAndUpdate_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70e7"></span>70E7</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label">FindActorSpriteAndUpdate_1</td>
<td class="address-2"><span id="70e8"></span>70E8</td>
<td class="instruction">LD ($5E24),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to <a href="5E20.html#5e24">WidthBytes</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70eb"></span>70EB</td>
<td class="instruction">LD ($5E27),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to <a href="5E27.html">ActorScreenPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70ee"></span>70EE</td>
<td class="instruction">CALL <a href="70AD.html">$70AD</a></td>
<td class="comment-1" rowspan="1">Call <a href="70AD.html">70AD</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70f1"></span>70F1</td>
<td class="instruction">CALL <a href="6F10.html">ScreenAddress</a></td>
<td class="comment-1" rowspan="1">Call <a href="6F10.html">ScreenAddress</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70f4"></span>70F4</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70f5"></span>70F5</td>
<td class="instruction">CP C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70f6"></span>70F6</td>
<td class="instruction">JR C,<a href="70D2.html#70f9">FindActorSpriteAndUpdate_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70f8"></span>70F8</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">FindActorSpriteAndUpdate_2</td>
<td class="address-2"><span id="70f9"></span>70F9</td>
<td class="instruction">LD ($5E26),A</td>
<td class="comment-1" rowspan="1">Set <a href="5E20.html#5e26">HeightLines</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70fc"></span>70FC</td>
<td class="instruction">LD ($5E23),A</td>
<td class="comment-1" rowspan="1">Set <a href="5E20.html#5e23">HeightPixels</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="70ff"></span>70FF</td>
<td class="instruction">JR <a href="70CE.html">NextSprite</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="70CE.html">NextSprite</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="70CE.html">70CE</a>
</td>
<td class="up">Up: <a href="../maps/all.html#70d2">Map</a></td>
<td class="next">
Next: <a href="7101.html">7101</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.6.</div>
<div><a href="../../dec/asm/28882.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>