<!DOCTYPE html>
<html>
<head>
<title>Tranz Am: Routine at 28019</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27922.html">27922</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28019">Map</a></td>
<td class="next">
Next: <a href="28210.html">28210</a>
</td>
</tr>
</table>
<div class="description">28019: Handler: Accelerate</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="27911.html">HandlerCanAccelerate</a> and <a href="27922.html">27922</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28019"></span>
<div class="comments">
<div class="paragraph">
Increase speed (see <a href="27911.html">HandlerCanAccelerate</a>).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate</td>
<td class="address-2"><span id="28019"></span>28019</td>
<td class="instruction">LD (24077),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to <a href="24077.html">Speed</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28022"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="27911.html">HandlerCanAccelerate</a> and <a href="27922.html">27922</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_0</td>
<td class="address-2"><span id="28022"></span>28022</td>
<td class="instruction">LD A,(24077)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="24077.html">Speed</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28025"></span>28025</td>
<td class="instruction">LD HL,18914</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=18914.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28028"></span>28028</td>
<td class="instruction">CALL <a href="28382.html">DrawGaugeLine</a></td>
<td class="comment-1" rowspan="1">Call <a href="28382.html">DrawGaugeLine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28031"></span>28031</td>
<td class="instruction">LD A,(24081)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="24080.html#24081">24081</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28034"></span>28034</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28035"></span>28035</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1">Store the result in <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28036"></span>28036</td>
<td class="instruction">LD A,(24080)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="24080.html">Player_Direction</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28039"></span>28039</td>
<td class="instruction">RRA</td>
<td class="comment-1" rowspan="3">Shift <span class="register">A</span> right three times.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28040"></span>28040</td>
<td class="instruction">RRA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28041"></span>28041</td>
<td class="instruction">RRA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28042"></span>28042</td>
<td class="instruction">AND %00011111</td>
<td class="comment-1" rowspan="1">Keep bits 0-4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28044"></span>28044</td>
<td class="instruction">BIT 0,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28046"></span>28046</td>
<td class="instruction">JR NZ,<a href="28019.html#28050">HandlerAccelerate_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28048"></span>28048</td>
<td class="instruction">XOR %00011111</td>
<td class="comment-1" rowspan="1">Unset bits 0-4.</td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_1</td>
<td class="address-2"><span id="28050"></span>28050</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="2">Create an offset; <span class="register">E</span>=<span class="register">A</span> and <span class="register">D</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28051"></span>28051</td>
<td class="instruction">LD D,0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28053"></span>28053</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Stash <span class="register">DE</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28054"></span>28054</td>
<td class="instruction">LD HL,32619</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>=<a href="32619.html">32619</a> + offset.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28057"></span>28057</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28058"></span>28058</td>
<td class="instruction">LD A,(24077)</td>
<td class="comment-1" rowspan="3">Create an offset; <span class="register">E</span>=<a href="24077.html">Speed</a> and <span class="register">D</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28061"></span>28061</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28062"></span>28062</td>
<td class="instruction">LD D,0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28064"></span>28064</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Stash <span class="register">DE</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28065"></span>28065</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28066"></span>28066</td>
<td class="instruction">CALL <a href="28463.html">28463</a></td>
<td class="comment-1" rowspan="1">Call <a href="28463.html">28463</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28069"></span>28069</td>
<td class="instruction">LD A,(24073)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="24072.html#24073">24073</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28072"></span>28072</td>
<td class="instruction">LD DE,(24071)</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="24071.html">24071</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28076"></span>28076</td>
<td class="instruction">CALL <a href="28210.html#28354">28354</a></td>
<td class="comment-1" rowspan="1">Call <a href="28210.html#28354">28354</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28079"></span>28079</td>
<td class="instruction">BIT 1,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28081"></span>28081</td>
<td class="instruction">JR NZ,<a href="28019.html#28143">HandlerAccelerate_6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28083"></span>28083</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28084"></span>28084</td>
<td class="instruction">ADC A,0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28086"></span>28086</td>
<td class="instruction">CP 12</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28088"></span>28088</td>
<td class="instruction">JR NC,<a href="28019.html#28160">HandlerAccelerate_7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_2</td>
<td class="address-2"><span id="28090"></span>28090</td>
<td class="instruction">LD (24073),A</td>
<td class="comment-1" rowspan="1">Store <span class="register">A</span> at <a href="24072.html#24073">24073</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28093"></span>28093</td>
<td class="instruction">LD (24071),HL</td>
<td class="comment-1" rowspan="1">Store <span class="register">HL</span> at <a href="24071.html">24071</a>.</td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_3</td>
<td class="address-2"><span id="28096"></span>28096</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28097"></span>28097</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28098"></span>28098</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28099"></span>28099</td>
<td class="instruction">LD HL,32650</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="32619.html#32650">32650</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28102"></span>28102</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28103"></span>28103</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28105"></span>28105</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28106"></span>28106</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28107"></span>28107</td>
<td class="instruction">CALL <a href="28463.html">28463</a></td>
<td class="comment-1" rowspan="1">Call <a href="28463.html">28463</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28110"></span>28110</td>
<td class="instruction">LD A,(24070)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="24069.html#24070">24070</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28113"></span>28113</td>
<td class="instruction">LD DE,(24068)</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="24068.html">24068</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28117"></span>28117</td>
<td class="instruction">CALL <a href="28210.html#28354">28354</a></td>
<td class="comment-1" rowspan="1">Call <a href="28210.html#28354">28354</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28120"></span>28120</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28121"></span>28121</td>
<td class="instruction">BIT 1,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28123"></span>28123</td>
<td class="instruction">JR NZ,<a href="28210.html">28210</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28125"></span>28125</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28126"></span>28126</td>
<td class="instruction">ADC A,0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28128"></span>28128</td>
<td class="instruction">CP 24</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28130"></span>28130</td>
<td class="instruction">JR NC,<a href="28019.html#28185">HandlerAccelerate_8</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28132"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="28210.html">28210</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_4</td>
<td class="address-2"><span id="28132"></span>28132</td>
<td class="instruction">LD (24068),HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28135"></span>28135</td>
<td class="instruction">LD (24070),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_5</td>
<td class="address-2"><span id="28138"></span>28138</td>
<td class="instruction">CALL <a href="27693.html">27693</a></td>
<td class="comment-1" rowspan="1">Call <a href="27693.html">27693</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28141"></span>28141</td>
<td class="instruction">JR <a href="28210.html#28227">28227</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28210.html#28227">28227</a>.</td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_6</td>
<td class="address-2"><span id="28143"></span>28143</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28144"></span>28144</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28145"></span>28145</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28147"></span>28147</td>
<td class="instruction">SBC A,0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28149"></span>28149</td>
<td class="instruction">JR NZ,<a href="28019.html#28090">HandlerAccelerate_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28151"></span>28151</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28152"></span>28152</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28153"></span>28153</td>
<td class="instruction">CP 128</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28155"></span>28155</td>
<td class="instruction">JR C,<a href="28019.html#28160">HandlerAccelerate_7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28157"></span>28157</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28158"></span>28158</td>
<td class="instruction">JR <a href="28019.html#28090">HandlerAccelerate_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_7</td>
<td class="address-2"><span id="28160"></span>28160</td>
<td class="instruction">LD A,(24081)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28163"></span>28163</td>
<td class="instruction">XOR 1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28165"></span>28165</td>
<td class="instruction">LD (24081),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28168"></span>28168</td>
<td class="instruction">LD A,(24080)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28171"></span>28171</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28172"></span>28172</td>
<td class="instruction">LD (24080),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28175"></span>28175</td>
<td class="instruction">LD A,5</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28177"></span>28177</td>
<td class="instruction">LD (24133),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28180"></span>28180</td>
<td class="instruction">CALL <a href="24803.html">SoundsBounce</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28183"></span>28183</td>
<td class="instruction">JR <a href="28019.html#28096">HandlerAccelerate_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28185"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="28210.html">28210</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">HandlerAccelerate_8</td>
<td class="address-2"><span id="28185"></span>28185</td>
<td class="instruction">LD A,(24081)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28188"></span>28188</td>
<td class="instruction">XOR 3</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28190"></span>28190</td>
<td class="instruction">LD (24081),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28193"></span>28193</td>
<td class="instruction">LD A,(24080)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28196"></span>28196</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28197"></span>28197</td>
<td class="instruction">LD (24080),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28200"></span>28200</td>
<td class="instruction">LD A,5</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28202"></span>28202</td>
<td class="instruction">LD (24133),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28205"></span>28205</td>
<td class="instruction">CALL <a href="24803.html">SoundsBounce</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28208"></span>28208</td>
<td class="instruction">JR <a href="28019.html#28138">HandlerAccelerate_5</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27922.html">27922</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28019">Map</a></td>
<td class="next">
Next: <a href="28210.html">28210</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Ultimate Play the Game</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.6.</div>
<div><a href="../../hex/asm/6D73.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>